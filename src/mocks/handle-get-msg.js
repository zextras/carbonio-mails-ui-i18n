/*
 * *** BEGIN LICENSE BLOCK *****
 * Copyright (C) 2011-2020 Zextras
 *
 * The contents of this file are subject to the ZeXtras EULA;
 * you may not use this file except in compliance with the EULA.
 * You may obtain a copy of the EULA at
 * http://www.zextras.com/zextras-eula.html
 * *** END LICENSE BLOCK *****
 */

function generateMessage(msgId) {
	return {
		"Header": {
			"context": {
				"session": {
					"id": "17065",
					"_content": "17065"
				},
				"change": {
					"token": 53628
				},
				"_jsns": "urn:zimbra"
			}
		},
		"Body": {
			"GetMsgResponse": {
				"m": [{
					"s": 11308,
					"d": 1605865175000,
					"l": "2",
					"cid": "17762",
					"rev": 53330,
					"id": msgId,
					"fr": "-- you can reply above this line -- Approval on pull request: ...",
					"e": [{
						"a": "pullrequests-reply@bitbucket.org",
						"d": "Olivo",
						"p": "Olivo Michele",
						"t": "f"
					}, {
						"a": "luca.allegro@zextras.com",
						"d": "luca",
						"p": "luca allegro",
						"t": "t"
					}],
					"su": "Re: [Bitbucket] Pull request #23: Added default destination to 'publicUrl' (zextras/zapp-login)",
					"mid": "\u003Cpr-zextras/zapp-login/23/approved/fca803e004c54127b7815df8a1bfbfb7@bitbucket.org\u003E",
					"sd": 1605865172000,
					"_attrs": {
						"IN-REPLY-TO": "\u003Cpr-zextras/zapp-login/23@bitbucket.org\u003E"
					},
					"mp": [{
						"part": "TEXT",
						"ct": "multipart/alternative",
						"mp": [{
							"part": "1",
							"ct": "text/plain",
							"s": 638
						}, {
							"part": "2",
							"ct": "text/html",
							"s": 6600,
							"body": true,
							"content": "\n\u003Chtml\u003E\n  \u003Chead\u003E\n    \n    \n  \u003C/head\u003E\n  \u003Cbody style=\"font: 14px/1.4285714 Arial, sans-serif; color: #333;\"\u003E\n    \u003Ctable style=\"width: 100%; border-collapse: collapse;\"\u003E\n      \u003Ctbody\u003E\n        \u003Ctr\u003E\n          \u003Ctd style=\"background: #f5f5f5; padding: 10px 10px 0; font: 14px/1.4285714 Arial, sans-serif;\"\u003E\n            \u003Ctable style=\"width: 100%; border-collapse: collapse;\"\u003E\n              \u003Ctbody\u003E\n                \n                \n                \n                \n                  \n                     \u003Ctr\u003E\n  \u003Ctd id=\"main\" style=\"font: 14px/1.4285714 Arial, sans-serif; padding: 0; background-color: #fff; border-radius: 5px\"\u003E\n    \u003Cdiv style=\"border: 1px solid #ccc; border-radius: 5px; padding: 20px\"\u003E\n      \u003Ctable style=\"width: 100%; border-collapse: collapse\"\u003E\n        \u003Ctbody\u003E\n          \u003Ctr\u003E\n            \u003Ctd style=\"font: 14px/1.4285714 Arial, sans-serif; padding: 0\"\u003E\n              \u003Ctable style=\"width: 100%; border-collapse: collapse\"\u003E\n                \u003Ctbody\u003E\n                  \u003Ctr\u003E\n                    \u003Ctd id=\"avatar\" style=\"font: 14px/1.4285714 Arial, sans-serif; padding: 0; width: 32px; vertical-align: top\"\u003E\n                      \n                      \u003Cimg width=\"32\" height=\"32\" alt=\"Olivo Michele\" style=\"border-radius: 3px\" dfsrc=\"https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/5c6a6370fc8f2453ccf0e385/709c7498-4d5c-4ea6-a15c-55a356eb7867/128?s&#61;128\"\u003E\n                    \u003C/td\u003E\n                    \u003Ctd id=\"content\" style=\"font: 14px/1.4285714 Arial, sans-serif; padding: 0 0 0 10px\"\u003E\n                      \n\u003Ctable style=\"width: 100%; border-collapse: collapse\"\u003E\n  \u003Ctbody\u003E\n    \u003Ctr\u003E\n      \u003Ctd class=\"user-action\" style=\"font: 14px/1.4285714 Arial, sans-serif; padding: 0; line-height: 1\"\u003E\n        \u003Cspan\u003E\n          \n            \u003Cstrong\u003EOlivo Michele\u003C/strong\u003E\n            \u003Cspan class=\"badge approved\" style=\"display: inline-block; font-size: 11px; font-weight: bold; border-radius: 3px; text-transform: uppercase; line-height: 1; color: #fff; padding: 2px 5px 1px; background-color: #14892c\"\u003Eapproved\u003C/span\u003E\n            pull request #23:\n          \n        \u003C/span\u003E\n      \u003C/td\u003E\n    \u003C/tr\u003E\n    \u003Ctr\u003E\n      \u003Ctd class=\"title\" style=\"font: 14px/1.4285714 Arial, sans-serif; padding: 5px 0 0; font-weight: bold; line-height: 1.2\"\u003E\n        \u003Ca href=\"https://bitbucket.org/zextras/zapp-login/pull-requests/23/added-default-destination-to-publicurl?link_source&#61;email\" style=\"color: #3572b0; text-decoration: none\" target=\"_blank\"\u003EAdded default destination to &#39;publicUrl&#39;\u003C/a\u003E\n      \u003C/td\u003E\n    \u003C/tr\u003E\n    \u003Ctr\u003E\n      \u003Ctd class=\"approvers last-line\" style=\"font: 14px/1.4285714 Arial, sans-serif; padding: 10px 0\"\u003E\n        \n      \u003C/td\u003E\n    \u003C/tr\u003E\n  \u003C/tbody\u003E\n\u003C/table\u003E\n\n                    \u003C/td\u003E\n                  \u003C/tr\u003E\n                \u003C/tbody\u003E\n              \u003C/table\u003E\n            \u003C/td\u003E\n          \u003C/tr\u003E\n          \n  \u003Ctr\u003E\n    \u003Ctd class=\"actions\" style=\"font: 14px/1.4285714 Arial, sans-serif; padding: 10px 0 0; border-top: 1px solid #ccc; line-height: 1\"\u003E\n      \u003Ca href=\"https://bitbucket.org/zextras/zapp-login/pull-requests/23/added-default-destination-to-publicurl?link_source&#61;email\" style=\"color: #3572b0; text-decoration: none\" target=\"_blank\"\u003EView pull request\u003C/a\u003E\n    \u003C/td\u003E\n  \u003C/tr\u003E\n\n        \u003C/tbody\u003E\n      \u003C/table\u003E\n    \u003C/div\u003E\n    \n  \n\u003Cdiv style=\"border: 1px solid #ccc; border-radius: 5px; padding: 20px; display: none\"\u003E\n  \u003Cdiv\u003E\n    \n    \n  \u003C/div\u003E\n  \n\u003C/div\u003E\n\n\n  \u003C/td\u003E\n\u003C/tr\u003E\n\n                  \n                \n                \u003Ctr\u003E\n                  \n\n\u003Ctd style=\"padding: 20px 0; color: #707070;\"\u003E\n  \u003Ctable style=\"width: 100%; border-collapse: collapse;\"\u003E\n    \u003Ctbody\u003E\n      \u003Ctr\u003E\n        \u003Ctd style=\"padding: 0\"\u003E\n          \n            \n            \n              \n              \n                \n                  \u003Ca style=\"color: #3572b0; text-decoration: none;\" href=\"https://bitbucket.org/zextras/zapp-login/pull-requests/23/unwatch/zextras_luha31/fc4de5e852551d682a394a5a3aa73f1f976b3f5bd115c6ce6f3ad0e6837c61f5/\" target=\"_blank\"\u003EUnwatch this pull request\u003C/a\u003E to stop receiving email updates.\n                \n              \n            \n          \n          \n        \u003C/td\u003E\n        \u003Ctd style=\"text-align: right; width: 100px; padding: 0\"\u003E\n          \u003Ca href=\"https://bitbucket.org\" style=\"color: #3572b0; text-decoration: none;\" target=\"_blank\"\u003E\n            \u003Cimg width=\"126\" height=\"18\" alt=\"Bitbucket\" dfsrc=\"https://d301sr5gafysq2.cloudfront.net/e010e6298c8f/img/email/bitbucket-footer.png\"\u003E\n          \u003C/a\u003E\n        \u003C/td\u003E\n      \u003C/tr\u003E\n    \u003C/tbody\u003E\n    \u003Ctfoot\u003E\n      \u003Ctr\u003E\n        \u003Ctd style=\"text-align: center; padding-top: 20px;\"\u003E\n          \u003Ca style=\"color: #3572b0; text-decoration: none;\" target=\"_blank\" href=\"https://bitbucket.org/account/admin/plans?utm_source&#61;bbctrns&amp;utm_medium&#61;email&amp;utm_campaign&#61;fv2&amp;utm_content&#61;t1\"\u003EAre you making the most of Bitbucket? Learn more about our premium plans.\u003C/a\u003E\n        \u003C/td\u003E\n      \u003C/tr\u003E\n      \u003Ctr\u003E\n        \u003Ctd style=\"text-align: center; padding-top: 5px;\"\u003E\n          \u003Ca style=\"color: #3572b0; text-decoration: none;\" target=\"_blank\" href=\"https://bitbucket.org/blog?utm_source&#61;bbctrns&amp;utm_medium&#61;email&amp;utm_campaign&#61;fv1&amp;utm_content&#61;t1\"\u003EBlog\u003C/a\u003E\n          &nbsp;|&nbsp;\n          \u003Ca style=\"color: #3572b0; text-decoration: none;\" target=\"_blank\" href=\"https://www.atlassian.com/git/tutorials?utm_source&#61;bbctrns&amp;utm_medium&#61;email&amp;utm_campaign&#61;fv1&amp;utm_content&#61;t1\"\u003EGit Tutorials\u003C/a\u003E\n          &nbsp;|&nbsp;\n          \u003Ca style=\"color: #3572b0; text-decoration: none;\" target=\"_blank\" href=\"https://community.atlassian.com/t5/Bitbucket/ct-p/bitbucket?utm_source&#61;bbctrns&amp;utm_medium&#61;email&amp;utm_campaign&#61;fv1&amp;utm_content&#61;t1\"\u003EBitbucket Community\u003C/a\u003E\n          &nbsp;|&nbsp;\n          \u003Ca style=\"color: #3572b0; text-decoration: none;\" target=\"_blank\" href=\"https://www.atlassian.com/legal/privacy-policy?utm_source&#61;bbctrns&amp;utm_medium&#61;email&amp;utm_campaign&#61;fv1&amp;utm_content&#61;t1\"\u003EPrivacy Policy\u003C/a\u003E\n        \u003C/td\u003E\n      \u003C/tr\u003E\n    \u003C/tfoot\u003E\n  \u003C/table\u003E\n\u003C/td\u003E\n\n                \u003C/tr\u003E\n              \u003C/tbody\u003E\n            \u003C/table\u003E\n          \u003C/td\u003E\n        \u003C/tr\u003E\n      \u003C/tbody\u003E\n    \u003C/table\u003E\n  \u003C/body\u003E\n\u003C/html\u003E\n"
						}]
					}]
				}],
				"_jsns": "urn:zimbraMail"
			}
		},
		"_jsns": "urn:zimbraSoap"
	};
}


export function handleGetMsgRequest(req, res, ctx) {
	const { id } = req.body.Body.GetMsgRequest.m;
	switch (id) {
		default:
		case '1':
			return res(
				ctx.json(
					generateMessage(id)
				)
			);
	}
}